[gd_scene load_steps=15 format=3]

[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/app/WorldSimulatorApp.gd" id="1_demo_script"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/EnvironmentController.gd" id="2_environment_script"]
[ext_resource type="PackedScene" path="res://addons/local_agents/scenes/simulation/ui/SimulationHud.tscn" id="3_sim_hud"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/PerformanceTelemetryServer.gd" id="4_perf_server"]
[ext_resource type="PackedScene" path="res://addons/local_agents/scenes/simulation/debug/DebugOverlay.tscn" id="5_debug_overlay"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/SettlementController.gd" id="6_settlement_script"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/VillagerController.gd" id="7_villager_script"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/CultureController.gd" id="8_culture_script"]
[ext_resource type="Script" path="res://addons/local_agents/scenes/simulation/controllers/EcologyController.gd" id="9_ecology_script"]

[sub_resource type="LabelSettings" id="LabelSettings_header"]
font_size = 18

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_demo"]
sky_top_color = Color(0.18, 0.42, 0.78, 1)
sky_horizon_color = Color(0.62, 0.76, 0.94, 1)
ground_bottom_color = Color(0.05, 0.05, 0.07, 1)
ground_horizon_color = Color(0.28, 0.28, 0.3, 1)

[sub_resource type="Sky" id="Sky_demo"]
sky_material = SubResource("ProceduralSkyMaterial_demo")

[sub_resource type="Environment" id="Environment_demo"]
background_mode = 2
sky = SubResource("Sky_demo")
background_energy_multiplier = 1.0
ambient_light_source = 3
ambient_light_energy = 0.95
sdfgi_enabled = true
sdfgi_cascades = 2
sdfgi_min_cell_size = 0.35
sdfgi_y_scale = 1
sdfgi_use_occlusion = true
sdfgi_read_sky_light = true
sdfgi_energy = 1.0

[node name="WorldSimulatorApp" type="Node3D"]
script = ExtResource("1_demo_script")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_demo")

[node name="EnvironmentController" type="Node3D" parent="."]
script = ExtResource("2_environment_script")

[node name="PerformanceTelemetryServer" type="Node" parent="."]
script = ExtResource("4_perf_server")

[node name="SettlementController" type="Node3D" parent="."]
script = ExtResource("6_settlement_script")

[node name="SettlementRoot" type="Node3D" parent="SettlementController"]

[node name="VillagerController" type="Node3D" parent="."]
script = ExtResource("7_villager_script")

[node name="VillagerRoot" type="Node3D" parent="VillagerController"]

[node name="CultureController" type="Node3D" parent="."]
script = ExtResource("8_culture_script")

[node name="EcologyController" type="Node3D" parent="."]
script = ExtResource("9_ecology_script")

[node name="PlantRoot" type="Node3D" parent="EcologyController"]

[node name="RabbitRoot" type="Node3D" parent="EcologyController"]

[node name="TerrainRoot" type="Node3D" parent="EnvironmentController"]

[node name="WaterRoot" type="Node3D" parent="EnvironmentController"]

[node name="FlowOverlayRoot" type="Node3D" parent="."]

[node name="DebugOverlayRoot" parent="." instance=ExtResource("5_debug_overlay")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.857167, -0.232406, 0.459113, 0, 0.892841, 0.450373, -0.515038, -0.386042, 0.765307, 0, 0, 0)
light_energy = 1.25
shadow_enabled = true

[node name="Camera3D" type="Camera3D" parent="."]
position = Vector3(22, 28, 32)
current = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PanelContainer" type="PanelContainer" parent="CanvasLayer"]
offset_left = 12.0
offset_top = 12.0
offset_right = 404.0
offset_bottom = 900.0

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="RootVBox" type="VBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="HeaderLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
text = "Voxel Worldgen Demo"
label_settings = SubResource("LabelSettings_header")

[node name="GraphicsButton" type="Button" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
unique_name_in_owner = true
layout_mode = 2
toggle_mode = true
text = "Graphics â–¸"

[node name="SeedRow" type="HBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="SeedLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/SeedRow"]
layout_mode = 2
text = "Seed"

[node name="SeedLineEdit" type="LineEdit" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/SeedRow"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "seed text"

[node name="RandomSeedButton" type="Button" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/SeedRow"]
unique_name_in_owner = true
layout_mode = 2
text = "Random"

[node name="GenerateButton" type="Button" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
unique_name_in_owner = true
layout_mode = 2
text = "Generate World"

[node name="PresetRow" type="HBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="TerrainPresetLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/PresetRow"]
layout_mode = 2
text = "Terrain Preset"

[node name="TerrainPresetOption" type="OptionButton" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/PresetRow"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
item_count = 4
selected = 0
popup/item_0/text = "Archipelago"
popup/item_1/text = "Plains"
popup/item_2/text = "Rolling"
popup/item_3/text = "Mountainous"

[node name="ApplyTerrainPresetButton" type="Button" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/PresetRow"]
unique_name_in_owner = true
layout_mode = 2
text = "Apply"

[node name="QualityRow" type="HBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="CloudQualityLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
layout_mode = 2
text = "Cloud Quality"

[node name="CloudQualityOption" type="OptionButton" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
item_count = 4
selected = 1
popup/item_0/text = "Low"
popup/item_1/text = "Medium"
popup/item_2/text = "High"
popup/item_3/text = "Ultra"

[node name="CloudDensityLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
layout_mode = 2
text = "Cloud Density"

[node name="CloudDensitySpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.25
max_value = 3.0
step = 0.05
value = 0.8

[node name="DebugDensityLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
layout_mode = 2
text = "Debug Density"

[node name="DebugDensitySpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.2
max_value = 1.0
step = 0.05
value = 0.6

[node name="OceanQualityLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
layout_mode = 2
text = "Ocean Quality"

[node name="OceanQualityOption" type="OptionButton" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
item_count = 4
selected = 1
popup/item_0/text = "Low"
popup/item_1/text = "Medium"
popup/item_2/text = "High"
popup/item_3/text = "Ultra"

[node name="SimBackendLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
layout_mode = 2
text = "Sim"

[node name="SimBackendOption" type="OptionButton" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
item_count = 4
selected = 1
popup/item_0/text = "CPU"
popup/item_1/text = "GPU Hybrid"
popup/item_2/text = "GPU Aggressive"
popup/item_3/text = "Ultra Performance"

[node name="AutoScaleCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/QualityRow"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Auto Scale"

[node name="EnvironmentRow" type="HBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="EnvLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
layout_mode = 2
text = "Environment"

[node name="EnableFogCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
unique_name_in_owner = true
layout_mode = 2
text = "Fog"

[node name="EnableSdfgiCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "SDFGI"

[node name="EnableGlowCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
unique_name_in_owner = true
layout_mode = 2
text = "Glow"

[node name="EnableCloudsCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Clouds"

[node name="EnableShadowsCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/EnvironmentRow"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Shadows"

[node name="Grid" type="GridContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
columns = 2

[node name="WidthLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Width"

[node name="WidthSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 8.0
max_value = 128.0
step = 1.0
value = 36.0

[node name="DepthLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Depth"

[node name="DepthSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 8.0
max_value = 128.0
step = 1.0
value = 36.0

[node name="WorldHeightLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "World Height"

[node name="WorldHeightSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 12.0
max_value = 96.0
step = 1.0
value = 36.0

[node name="SeaLevelLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Sea Level"

[node name="SeaLevelSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 1.0
max_value = 72.0
step = 1.0
value = 12.0

[node name="SurfaceBaseLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Surface Base"

[node name="SurfaceBaseSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 2.0
max_value = 64.0
step = 1.0
value = 3.0

[node name="SurfaceRangeLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Surface Range"

[node name="SurfaceRangeSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 2.0
max_value = 48.0
step = 1.0
value = 7.0

[node name="NoiseFrequencyLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Noise Frequency"

[node name="NoiseFrequencySpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.01
max_value = 0.4
step = 0.005
value = 0.055

[node name="NoiseOctavesLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Noise Octaves"

[node name="NoiseOctavesSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 1.0
max_value = 8.0
step = 1.0
value = 4.0

[node name="NoiseLacunarityLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Noise Lacunarity"

[node name="NoiseLacunaritySpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 1.1
max_value = 4.0
step = 0.05
value = 1.85

[node name="NoiseGainLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Noise Gain"

[node name="NoiseGainSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.05
max_value = 1.0
step = 0.01
value = 0.42

[node name="SurfaceSmoothingLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Surface Smoothing"

[node name="SurfaceSmoothingSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.0
max_value = 1.0
step = 0.01
value = 0.48

[node name="CaveThresholdLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Cave Threshold"

[node name="CaveThresholdSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = -0.95
max_value = 0.95
step = 0.01
value = 0.57

[node name="StartYearLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Start Year"

[node name="StartYearSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = -20000.0
max_value = 5000.0
step = 1.0
value = -8000.0

[node name="YearsPerTickLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
layout_mode = 2
text = "Years / Tick"

[node name="YearsPerTickSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/Grid"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.01
max_value = 50.0
step = 0.01
value = 0.25

[node name="FlowRow" type="HBoxContainer" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="ShowFlowCheckBox" type="CheckBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/FlowRow"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Show Flow Map"

[node name="FlowStrengthLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/FlowRow"]
layout_mode = 2
text = "Min Strength"

[node name="FlowStrengthThresholdSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/FlowRow"]
unique_name_in_owner = true
layout_mode = 2
min_value = 0.0
max_value = 1.0
step = 0.01
value = 0.22

[node name="FlowStrideLabel" type="Label" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/FlowRow"]
layout_mode = 2
text = "Stride"

[node name="FlowStrideSpinBox" type="SpinBox" parent="CanvasLayer/PanelContainer/MarginContainer/RootVBox/FlowRow"]
unique_name_in_owner = true
layout_mode = 2
min_value = 1.0
max_value = 8.0
step = 1.0
value = 1.0

